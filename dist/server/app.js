(()=>{var t={806:(t,e,n)=>{t.exports=()=>{const t={js:[],css:[]},e=n(484);return t.js.push('<script src="library/library.lib.js"><\/script>'),["main.js"].forEach((n=>{e[n]&&t.js.push(`<script type="text/javascript" defer src="${e[n]}"><\/script>`)})),["main.css"].forEach((n=>{e[n]&&t.css.push(`<link rel="stylesheet" type="text/css" href="${e[n]}" />`)})),t}},484:t=>{"use strict";t.exports=JSON.parse('{"main.js":"static/js/main.b48d55be.js","main.css":"static/css/main.ddd8a4d3.css"}')}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=require("koa");var e=n.n(t);const r=require("react");var a=n.n(r);const i=require("react-dom/server"),s=require("react-router"),o=require("react-router-dom");function c(){return c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c.apply(this,arguments)}const l=({routerMap:t})=>a().createElement("div",null,a().createElement(o.Switch,null,t.map((t=>{if(t.initData){const{initData:e,path:n,exect:r}=t;return a().createElement(o.Route,{key:n,path:n,exact:r,render:n=>a().createElement(t.component,c({},n,{initData:e}))})}return a().createElement(o.Route,c({key:t.path},t))})))),u=require("axios");var p=n.n(u);const d=t=>p().get(`http://localhost:3000/api/get_data/${t}`),m=require("react-redux"),h=require("react-helmet"),v=t=>({dispatch:t}),y=t=>{var e,n,r,i,s;return(0,m.connect)(null,v)((n=e=class extends a().Component{constructor(t){super(t);let e={title:"前端",keywords:"前端",description:"前端"},n={};var r,a;n=null===(r=t.staticContext)||void 0===r?void 0:r.initData,e=null===(a=t.staticContext)||void 0===a?void 0:a.initData.tdk,this.state={tdk:e,initData:n||{}}}async componentDidMount(){const e=t.getInitProps;if(e){const t=this.props.dispatch,n=await e(t);this.setState({tdk:n.tdk,initData:n})}}render(){const e={...this.props,...this.state},{tdk:n}=this.state;return a().createElement("div",null,a().createElement(h.Helmet,null,a().createElement("title",null,null==n?void 0:n.title),a().createElement("meta",{name:"description",content:null==n?void 0:n.description}),a().createElement("meta",{name:"keywords",content:null==n?void 0:n.keywords})),a().createElement(t,e))}},r=e,i="getInitProps",s=t.getInitProps,i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,n))},E="ADD_COUNT",g="INIT_COUNT",x=()=>{const t=(0,m.useDispatch)(),e=(0,m.useSelector)((t=>t.count));return a().createElement("div",{className:"home"},a().createElement("h1",null,"我的"),a().createElement("h2",null,e),a().createElement("button",{onClick:()=>{t({type:E})}},"+"),a().createElement("br",null),a().createElement("img",{src:"assets/images/303984.jpg"}),a().createElement(o.Link,{to:"/list"},"列表页"))};x.getInitProps=async t=>{const e=(await d("home")).data;return t({type:g,count:100}),e};const f=y(x),b=t=>{const{initData:e}=t;return a().createElement("div",{className:"list"},a().createElement("h1",null,"列表"),a().createElement(o.Link,{to:"/home"},"主页"),a().createElement("ul",null,e.data?e.data.map(((t,e)=>a().createElement("li",{key:e},t.title))):a().createElement("li",null,"！！！暂无数据！！！")))};b.getInitProps=async()=>(await d("list")).data;const w=y(b),j=()=>a().createElement("div",null,"Profile");j.getInitProps=async()=>(await d("list")).data;const k=[{path:"/home",component:f,exect:!0},{path:"/list",component:w,exect:!0},{path:"/profile",component:y(j),exect:!0}];var D=n(806),P=n.n(D);const S=require("redux"),q={count:0},O=(t=q,e)=>{const n={...t};switch(e.type){case"INIT_STORE":return e.initData;case E:return n.count++,n;case g:return n.count=e.count,n}},I=require("koa-static");var $=n.n(I);const T=require("path");var N=n.n(T);const C=require("http-proxy-middleware"),_=require("koa2-connect");var M=n.n(_);const R=new(e());R.use((async(t,e)=>{t.url.startsWith("/api")&&(t.respond=!1,await M()((0,C.createProxyMiddleware)({target:"http://localhost:9000/",changeOrigin:!0,secure:!1}))(t,e)),await e()})),R.use($()(N().join(__dirname,"../../dist/public"))),R.use((async(t,e)=>{let n="",r={},c=null;const u=t.request.url;{global.document={},global.window={};const t=(0,S.createStore)(O),e=(t=>{let e=null;for(let n of k)(0,o.matchPath)(t,n)&&(e=n);return e})(u);if(e){const n=e.component.getInitProps;if(n){const e=t.dispatch;c=await n(e),r=t.getState()||{}}}const p={initData:c};n=(0,i.renderToString)(a().createElement(m.Provider,{store:t},a().createElement(s.StaticRouter,{location:u,context:p},a().createElement(l,{routerMap:k}))))}const p=h.Helmet.renderStatic(),d=P()();t.body=`\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        ${p.title.toString()}\n        ${p.meta.toString()}\n        ${p.link.toString()}\n        ${d.css.join("")}\n    </head>\n    <body>\n        <div id="root">${n}</div>\n        <textarea id="ssrTextInitData" style="display:none;">\n            ${JSON.stringify(c)}\n        </textarea>\n        <textarea id="ssrTextInitStore" style="display:none;">\n            ${JSON.stringify(r)}\n        </textarea>\n        ${d.js.join("")}\n    </body>\n    </html>\n    `,e()})),R.listen(3e3,(()=>{console.log("http://localhost:3000")}))})()})();